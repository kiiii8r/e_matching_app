<%= render "shared/contents-header" %>

<div class="user-show">
  <div class="user-box">
    <h2 class="name">
      <%= @user.nickname %>
    </h2>
    <div class='user-img-content'>
      <%= image_tag @profile.image.variant(resize:'500x500'), class:"user-img" if @profile.image.attached? %>
    
    </div>
    <div class="user-name-box">
      <span class="user-name"></span>
        <%= @user.nickname %>さん
    </div>

    <% if current_user.id == @user[:id] %>

    <%= link_to 'プロフィールの編集', edit_user_profile_path(@user[:id]), class: "user-red-btn" %>
    <p class='or-text'>or</p>

    <% elsif @room_number.blank? %>

      <%= form_with model: @room, url: rooms_path,  local: true do |f|%>

      <%= f.submit "初期メッセージ", class: 'chat-room-form__action-btn'%>

      <input name="room[user_ids][]" type="hidden" value=<%= current_user.id %>>
      <input name="room[user_ids][]" type="hidden" value=<%= @user.id %>>
      <input name="partner_id[]" type="hidden" value=<%= @user.id %>>

      <% end %>

    <% else %>

      <%= link_to 'メッセージ', room_path(@room_number,partner_id: @user.id ) %>

    <% end %>


    <div class="user-explain-box">
      <span><%= @profile.introduction %></span>
    </div>
    <table class="detail-table">
      <tbody>
        <tr>
          <th class="detail-user">年齢</th>
          <td class="detail-value"><%= @user.age %></td>
        </tr>
        <tr>
          <th class="detail-user">住み</th>
          <td class="detail-value"><%= @profile.prefecture.name %></td>
        </tr>
        <tr>
          <th class="detail-user">主な役割</th>
          <td class="detail-value"><%= @profile.role.name %></td>
        </tr>
        <tr>
          <th class="detail-user">主な使用言語1</th>
          <td class="detail-value"><%= @profile.language1.name %></td>
        </tr>
        <tr>
          <th class="detail-user">主な使用言語2</th>
          <td class="detail-value"><%= @profile.language2.name %></td>
        </tr>
        <tr>
          <th class="detail-user">主な使用言語3</th>
          <td class="detail-value"><%= @profile.language3.name %></td>
        </tr>
        <tr>
          <th class="detail-user">その他使用言語</th>
          <td class="detail-value"><%= @profile.other_language %></td>
        </tr>
        <tr>
          <th class="detail-user">目標</th>
          <td class="detail-value"><%= @profile.target %></td>
        </tr>
        <tr>
          <th class="detail-user">趣味</th>
          <td class="detail-value"><%= @profile.hobby %></td>
        </tr>
        <tr>
          <th class="detail-user">長所</th>
          <td class="detail-value"><%= @profile.pros %></td>
        </tr>
        <tr>
          <th class="detail-user">短所</th>
          <td class="detail-value"><%= @profile.defect %></td>
        </tr>
      </tbody>
    </table>
    <div class="option">
      <div class="favorite-btn">
        <%# <%= image_tag "star.png" ,class:"favorite-star-icon" ,width:"20",height:"20"%> %>
        <span>お気に入り 0</span>
      </div>
      <div class="report-btn">
        <%# <%= image_tag "flag.png" ,class:"report-flag-icon" ,width:"20",height:"20"%> %>
        <span>通報</span>
      </div>
    </div>
  </div>

  
  <% if current_user.id != @user[:id] %>
  
  <div class="links">
    <a href="#" class="change-user-btn">
      ＜ 前の人
    </a>
    <a href="#" class="change-user-btn">
      次の人 ＞
    </a>
  </div>

 <% end %>

  <%# <a href="#" class='another-user'><%= @userをもっと見る</a> %> %>
</div>

<%= render "shared/contents-footer" %>